C51 COMPILER V9.53.0.0   MUSIC                                                             12/02/2014 10:04:23 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE MUSIC
OBJECT MODULE PLACED IN music.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE music.c OPTIMIZE(8,SPEED) DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "music.h"
   2          
   3          void playSong(Song s)
   4          {
   5   1        switch (s)
   6   1        {
   7   2          case STAR:
   8   2            play_song(star_hz, star_dur, notes[1]);
   9   2            break;
  10   2            
  11   2          case SORC:
  12   2            play_song(sorc_hz, sorc_dur, notes[1]);
  13   2            break;
  14   2            
  15   2          case POKE:
  16   2            play_song(poke_hz, poke_dur, notes[2]);
  17   2            break;
  18   2        }
  19   1      }
  20          
  21          void play_song(unsigned int hz[], unsigned char dur[], unsigned char length)
  22          {
  23   1        unsigned char i;
  24   1        
  25   1        for (i = 0; i < length; ++i)
  26   1        {
  27   2          play_note(hz[i], dur[i]);
  28   2        }
  29   1      }
  30          
  31          void play_note(unsigned int hz, unsigned char dur)
  32          {
  33   1        unsigned int i, time;
  34   1        unsigned char high, low;
  35   1        
  36   1        time = hz * dur / 18;
  37   1        i = 307125 / hz;
  38   1        high = i / 256;
  39   1        low = i % 256;
  40   1        
  41   1        TMOD = TMOD & 0xf0;
  42   1        TMOD = TMOD | 0x01;
  43   1        
  44   1        for (i = 0; i < time; ++i)
  45   1        {
  46   2          TH0 = high;
  47   2          TL0 = low;
  48   2          TR0 = 1;
  49   2          while (TF0 == 0);
  50   2          TR0 = 0;
  51   2          TF0 = 0;
  52   2          SPK = ~SPK;
  53   2        }
  54   1      }

C51 COMPILER V9.53.0.0   MUSIC                                                             12/02/2014 10:04:23 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    236    ----
   CONSTANT SIZE    =    303    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
